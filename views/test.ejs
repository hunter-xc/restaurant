<!DOCTYPE HTML>
<html>
<head>
<title>Wedding Banquet and Management - Budget List</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />


<!-- Bootstrap Core CSS -->

<link rel='stylesheet' href='http://netdna.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css'>
<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/dataTables.bootstrap4.min.css">
<!-- Custom CSS -->
<link href="css/style.css" rel='stylesheet' type='text/css' />

<!-- Graph CSS -->
<link href="css/font-awesome.css" rel="stylesheet"> 
<!-- jQuery -->
<script src="js/jquery-2.1.4.min.js"></script>
<!-- //jQuery -->


</head> 
<body>
   <div class="page-container" style="background-image: url('wedding.jpg');">
		<!--/content-inner-->
		<div class="left-content">
		    <div class="mother-grid-inner">
				<!--header start here-->
				<div class="header-main">
					<div class="profile_details" style="float:right; margin-left:10px; width:25%; height:60px">							
						<div class="user-name">
							<p style="margin-bottom:1%;"><%=userdata[0].bridegroom %>&<%=userdata[0].bride %> </p>
							<p style="margin-bottom:1%;">Wedding Date:</p>
							<p style="margin-bottom:1%;"><%=userdata[0].big_day %></p>
						</div>
										
						<ul>
							<li class="dropdown profile_details_drop">
										<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false">
										<i style="margin-top:5%;" class="fa fa-angle-down"></i>
										<i style="margin-top:5%;" class="fa fa-angle-up"></i>
										<div class="clearfix"></div>	
								</a>
								
							
								<ul class="dropdown-menu drp-mnu">
									<li> <a href="#"><i class="fa fa-download"></i>Download app</a> </li> 
									<li> <a href="/logout"><i class="fa fa-sign-out"></i>Logout</a> </li>
								</ul>
								

							</li>
						</ul>
						
						<ul>
							<li class="dropdown profile_details_drop">
								<a href="#" class="dropdown-toggle" data-toggle="dropdown" aria-expanded="false"><i style="right:60px; width:10%; color:white; margin-top:-5%;" class="fa fa-tasks"></i></a>
								<ul class="dropdown-menu drp-mnu task">
									
									<li>
										<div class="task-info">
											<span class="task-desc">Task done</span><span class="percentage">40%</span>
											<div class="clearfix"></div>	
										</div>
										<div class="progress progress-striped active">
											<div class="bar yellow" style="width:40%;"></div>
										</div>
									</li>
									
									<li>
										<div class="task-info">
											<span class="task-desc">Guest attending</span><span class="percentage">90%</span>
										   <div class="clearfix"></div>	
										</div>
										<div class="progress progress-striped active">
											 <div class="bar green" style="width:90%;"></div>
										</div>
									</li>
									
									<li>
										<div class="task-info">
											<span class="task-desc">Budget used</span><span class="percentage">33%</span>
											<div class="clearfix"></div>	
										</div>
									   <div class="progress progress-striped active">
											 <div class="bar red" style="width: 33%;"></div>
										</div>
									</li>
									
								</ul>
							</li>										
							</ul> 	
							<div class="clearfix"> </div>
					
						
					<div class="clearfix"> </div>
				
					<!--notification menu end -->
					
		
						
					</div>

					<div class="w3layouts-right">
						<!--search-box-->
							<div class="w3-search-box">
								<form action="#" method="post">
									<input type="text" placeholder="Search..." required="">	
									<input type="submit" value="">					
								</form>
							</div><!--//end-search-box-->
						<div class="clearfix"> </div>
					</div>

							
								
					<div class="clearfix"> </div>	
				</div>
	<!--heder end here-->

						
	<div class="home-header-main">
		<div style="padding-left: 15px; padding-right: 20px;">	
			<a href="/">Home</a>  <i class="fa fa-angle-right"></i> <a href="/read_budget">Budget list</a>
	<HR>
	<h1>Budget list</h1>
	 <p style="width:50%; float:left;">t=Total Budget: <%=userdata[0].budget %></p>
	  
		<button style="float:right;" class="glyphicon glyphicon-plus">Add</button> 

		<table class="table table-striped table-bordered table-hover" cellspacing="0" width="100%" id="tblSample" border="1px">
			<% 
				if (result.length > 0) {
					var category_now = "";
					var total_estimate = 0.0;
					var total_actual = 0.0;
					var subtotal_estimate = 0.0;
					var subtotal_actual = 0.0;
					var count = 0;
			%>
				<thead style="background-color:lightpink;">
					<tr>
						<th>Category</th>
						<th>Item</th>
						<th>Estimated cost($HKD)</th>
						<th>Actual cost($HKD)</th>
						<th>Edit</th>
						<th>Delete</th>
					</tr>
				</thead>
			<% } %>			
			<tbody>
			<%
				for (var i=0; i<result.length; i++) {
			%>
					<tr>
			<%		
					if (result[i].category != category_now) {
						category_now = result[i].category;
						count = 0;
	
						// calculate the row for same category
						for (var j=i; j<result.length; j++) {
							if (result[j].category == category_now) {
								count++;
							}	else {
								break;
							}
						}
			%>					
						<td rowspan="<%=count+1 %>"><%=result[i].category %></td>
			<%
					}
					count--;
					subtotal_estimate += parseFloat(result[i].estimate_cost);
					if (result[i].actual_cost)
						subtotal_actual += parseFloat(result[i].actual_cost);
					
			%>		
						<td><%=result[i].item %></td>
						<td><%=result[i].estimate_cost %></td>
						<td><%=result[i].actual_cost %></td>
						<td><a id="<%=result[i]._id %>_edit" class="glyphicon glyphicon-pencil"></a></td>
						<td><a id="<%=result[i]._id %>_del"  class="glyphicon glyphicon-trash"></a></td>
					</tr>			
			<%
					if (count == 0) {					
			%>
					<tr>
						<td>Subtotal</td>
						<td><%=subtotal_estimate %></td>
						<td><%=subtotal_actual %></td>
						<td></td>
						<td></td>
					</tr>
			<%
						total_estimate += subtotal_estimate;
						total_actual += subtotal_actual;
						subtotal_estimate = 0.0;
						subtotal_actual = 0.0;	
					}
				}
			%>	
					<tr><td></td><td>Total</td><td><%=total_estimate %></td><td><%=total_actual %></td><td></td><td></td></tr>
			
			<!--
				<tr>
				  <td rowspan="5">Attire</td>
				  <td contenteditable="true">Bride's Gown</td>
				  <td contenteditable="true">4000</td>
				  <td contenteditable="true">3000</td>
				  <td><span class="glyphicon glyphicon-pencil"></span></td>
					  <td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
				
				<tr>
				 
				   <td contenteditable="true">Bride's shoes</td>
				  <td contenteditable="true" class="amount">500</td>
				  <td contenteditable="true">400</td>
				<td><span class="glyphicon glyphicon-pencil"></span></td>
					  <td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
				
				<tr>
				  
				  <td contenteditable="true">Groom's Tuxedo or Suit</td>
				  <td contenteditable="true" class="amount">800</td>
				  <td contenteditable="true" >500</td>
				 <td><span class="glyphicon glyphicon-pencil"></span></td>
					  <td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
				
					<tr>
			   
				   <td contenteditable="true">Groom's shoes</td>
				  <td contenteditable="true" class="amount">500</td>
				  <td contenteditable="true">300</td>
				 <td><span class="glyphicon glyphicon-pencil"></span></td>
					  <td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
			
				<tr>

				 <td>Total:</td>
				  <td>5800</td>
				  <td>4200</td>
				   <td></td>
				</tr>
				
				<tr>
				  <td rowspan="2">Photography</td>
				  <td contenteditable="true">Photographer</td>
				  <td contenteditable="true" class="someClass">5000</td>
				  <td contenteditable="true">3000</td>
				  <td><span class="glyphicon glyphicon-pencil"></span></td>
		<td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
				
				  <tr>

				 <td>Total:</td>
				  <td>5000</td>
				  <td>3000</td>
	<td></td>
				</tr>
				
				 <tr>
				  <td rowspan="3">Wedding ceremony</td>
				  <td contenteditable="true">Rent of venue</td>
				  <td contenteditable="true" class="someClass">20000</td>
				  <td contenteditable="true">15000</td>
				 <td><span class="glyphicon glyphicon-pencil"></span></td>
		<td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
				
				 <tr>

				  <td contenteditable="true">Venue decoration</td>
				  <td contenteditable="true" class="someClass">25000</td>
				  <td contenteditable="true">23000</td>
				 <td><span class="glyphicon glyphicon-pencil"></span></td>
		<td><span class="glyphicon glyphicon-trash"></span></td>
				</tr>
				
				 <tr>

				 <td>Total:</td>
				 <td>45000</td>
				 <td>38000</td>
				 <td></td>
				</tr>
		-->		

			  </tbody>
		
			</table>

	  
	</div>
	</div>


						

	<!-- script-for sticky-nav -->
			<script>
			$(document).ready(function() {
				 var navoffeset=$(".header-main").offset().top;
				 $(window).scroll(function(){
					var scrollpos=$(window).scrollTop(); 
					if(scrollpos >=navoffeset){
						$(".header-main").addClass("fixed");
					}else{
						$(".header-main").removeClass("fixed");
					}
				 });
				 
			});
			</script>
			<!-- /script-for sticky-nav -->
	<!--inner block start here-->
	<div class="inner-block">

	</div>
	<!--inner block end here-->

			</div>
		</div>
  <!--//content-inner-->
			<!--/sidebar-menu-->
				<div class="sidebar-menu">
					<header class="logo1">
						<a href="index.html"><img class="imgclass" src="Wedding-heart.png" alt="Wedding"></a>
					</header>
						
                           <div>
									<ul id="menu">
										<li><a href="#">Budget list<div class="clearfix"></div></a></li>
										 <li><a href="#">Checklist<div class="clearfix"></div></a></li>
									<li><a href="#">Guest list<div class="clearfix"></div></a></li>
								    <li><a href="#">Helper list<div class="clearfix"></div></a></li>
									 <li><a href="#">Run Down<div class="clearfix"></div></a></li>
									 <li><a href="#">Schedule<div class="clearfix"></div></a></li>
									<li><a href="#">Seating plan<div class="clearfix"></div></a></li>
									  <li><a href="#">View photo<div class="clearfix"></div></a></li>
									 <li><a href="#">Vendor list<div class="clearfix"></div></a></li>
								  </ul>
								</div>
							  </div>
							  <div class="clearfix"></div>		
	</div>
						

<!-- Bootstrap Core JavaScript -->
   <script src="js/bootstrap.min.js"></script>
   <!-- /Bootstrap Core JavaScript -->	   
<!-- morris JavaScript -->	




<script type="text/javascript" src="http://code.jquery.com/jquery-3.2.1.min.js"></script>
 <script type="text/javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
 <script type="text/javascript"  src="https://cdn.datatables.net/1.10.16/js/dataTables.bootstrap4.min.js"></script>

<script>
	
$(document).ready(function() {
	$('#tblSample').DataTable({
	"order" : [[0, "desc"]]
	 });
});

</script>
 
	
</body>
</html>